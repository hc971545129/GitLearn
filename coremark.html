<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>coremark</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}


</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><h4><a name="问题" class="md-header-anchor"></a><strong><span>问题</span></strong></h4><ul><li><strong><span>分析Coremark代码，找出Eric所说的coremark代码中的变量，做同样的修改。在U84上证明有效性，分析为什么会有效。</span></strong></li><li><strong><span>用同样的修改，在EBC上做实验，看是否有效。分析原因，为什么有效（或为什么无效）。分析在同样的指令序列下，在U84和EBC上的效果差异的原因。</span></strong></li><li><strong><span>找出Eric所说的B extension中哪条指令可以起到同样的效果。如果可能，想象编译器应该怎么来支持这样的指令达到优化的效果。</span></strong></li></ul><h4><a name="参考资料" class="md-header-anchor"></a><strong><span>参考资料</span></strong></h4><ul><li><a href='https://sifive.atlassian.net/wiki/spaces/SOF/pages/426082650/coremark+e31+vs+s51'><span>Confluence page</span></a></li><li><a href='https://sifive.zoom.us/rec/share/wsVkIpjoympJG53o-RvNRJIADJjeT6a8gCJM_acKyhl9z31vS0CJRlryB80nRzFF'><span>Eric</span></a><span> Passcode: 52Pyxg=&amp;</span></li></ul><h4><a name="实验记录在ebcrtl-base下进行" class="md-header-anchor"></a><strong><span>实验记录(在EBC/RTL-Base下进行)</span></strong></h4><ol start='' ><li><p><span>拉库 </span><code>git clone git@gitlab.cn.sifive.com:Project-EBC/RTL-Base.git</code></p></li><li><p><span>进入 </span><code>RTL-Base</code><span>:  </span><code>cd RTL-Base</code><span>    更新子库 </span><code>git submodule update --init --recursion</code></p></li><li><p><img src="./git_module.png" style="zoom:80%;" /><span>问题已解决（我当时把 </span><code>coremark</code><span> 文件夹拷过去替换了，导致 </span><code>git</code><span> 里不能识别）。重新 </span><code>git clone</code><span> 仓库，使用如下命令更新 </span><code>coremark</code></p></li><li><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">coremark/<span class="cm-tab" role="presentation" cm-text="	">   </span>#RTL-Base/bc_xfer/software/ </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|----barebones/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  --移植到裸机下需要修改的文件 <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>|---core_portme.h  <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>--移植平台工程具体配置信息 <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>|---core_portme.c  <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>--计时以及板级初始化实现 &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  | &nbsp; &nbsp; &nbsp; |---core_portme.mak<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>//****修改其中Iteration，以改变coremark运行次数****//</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>|---cvt.c <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>|---ee_printf.c &nbsp;  <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>--打印函数串口发送实现 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---freebsd/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  --移植到freebad下需要修改的文件 &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---cygwin/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --移植到cygwin下需要修改的文件 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---linux/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  --移植到linux下需要修改的文件 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---linux64/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  --移植到linux64下需要修改的文件 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---simple/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --基本移植需要修改的文件 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---core_main.c &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">  </span>--主程序入口 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---core_state.c &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span>--状态机控制子程序 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---core_list_join.c  <span class="cm-tab" role="presentation" cm-text="	">  </span>--列表操作子程序 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---core_matrix.c &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">  </span>--矩阵运算子程序 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---core_util.c &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">  </span>--CRC计算子程序 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---coremark.h &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span>--工程配置与数据结构定义 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---docs/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --设计文档 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---coremark.md5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---LICENSE.txt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---Makefile &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---readme.txt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  --基本介绍 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>|---release_notes.txt &nbsp; &nbsp; --版本说明</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 589px;"></div><div class="CodeMirror-gutters" style="display: none; height: 589px;"></div></div></div></pre></li><li><p><span>进入 </span><code>sim</code><span>  目录 </span><code>cd ./bc_xfer/sim</code><span>      编译 </span><code>make compile</code><span>        运行 </span><code>coremark:</code><span>   </span><code>make coremark</code></p></li><li><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">\coremark<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>#RTL-Base/bc_xfer/sim/ &nbsp; &nbsp; &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  |---ebc_stdout.log<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span># 记录跑分结果</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  |---iss_rtl_cmp.log<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span># 记录指令集仿真RTL比对信息</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  |---rerun.sh<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span># 重新运行</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  |---rom.hex<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span># 内存空间 64bit x 512</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  |---run.log<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span># 记录仿真过程中所有信息</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  |---timelog<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span># 记录仿真开始和结束时间</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  |---ucli.key<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span># VCS 与coremark无关</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 181px;"></div><div class="CodeMirror-gutters" style="display: none; height: 181px;"></div></div></div></pre></li><li><p><span>第 </span><code>5</code><span> 步也可以进入 </span><code>RTL-Base/bc_xfer/vt</code><span> 目录执行 </span><code>vt -t coremark</code></p></li><li><p><span>更改 </span><code>RTL-Base/bc_xfer/software/coremark/linux64</code><span> 中的文件后，需删除 </span><code>coremark.riscv.hex</code><span> 文件，同时 </span><code>make clean</code><span> 。重复步骤 </span><code>5</code><span> 或 </span><code>7</code><span> </span></p></li></ol><h5><a name="对比-vcs-执行结果" class="md-header-anchor"></a><span>对比 </span><code>VCS</code><span> 执行结果：</span></h5><table>
<tbody><tr>
   <td><center><img src="./coremark_u32.png" width="400" height="200"><center>unsigned int</center></center></td>
   <td><center><img src="./coremark_int32.png" width="400" height="200"><center>signed int</center></center></td>
</tr>
</tbody></table><ul><li><span>运行时间：</span><code>12.57min = 754s &gt; 533s = 8.88min</code><span>  减少大于 </span><code>1/4</code></li></ul><h5><a name="对比跑分结果-rtl-basebcxfersimcoremarkebcstdoutlog" class="md-header-anchor"></a><span>对比跑分结果 </span><code>RTL-Base/bc_xfer/sim/coremark/ebc_stdout.log</code><span>：</span></h5><table>
<tbody><tr>
   <td><center><img src="./ebc_stdout_log.png" width="400" height="120"><center>unsigned int ebc_stdout.log</center></center></td>
   <td><center><img src="./ebc_stdout_log_int32.png" width="400" height="120"><center>signed int ebc_stdout.log</center></center></td>
</tr>
</tbody></table><ul><li><span>跑分结果：</span><code>1000/299.056 = 3.34 &lt; 3.41 = 1000/293.463</code></li></ul><h5><a name="对比反汇编文件-rtl-basebcxfersoftwarecoremark-" class="md-header-anchor"></a><span>对比反汇编文件 </span><code>RTL-Base/bc_xfer/software/coremark/</code><span> :</span></h5><ol start='' ><li><span>执行编译 </span><code>make compile</code><span> 产生 </span><code>coremark.riscv</code><span> 文件：</span><code>riscv64-unknown-elf-objdump -d coremark.riscv &gt; dump.u_int32</code></li><li><span>重新编译 </span><code>make compile</code><span> 产生新的 </span><code>coremark.riscv</code><span> 文件：</span><code>riscv64-unknown-elf-objdump -d coremark.riscv &gt; dump.u_int32</code></li><li><span>对比两次产生的反汇编文件：</span></li></ol><table>
<tbody><tr>
   <td><center><img src="./dump_uint32.png" width="400" height="400"><center>dump_unsigned_int32   `code lines=7130`</center></center></td>
   <td><center><img src="./dump_int32.png" width="400" height="400"><center>dump_signed_int32   `code lines=7949`</center></center></td>
</tr>
</tbody></table><figure><table><thead><tr><th><span>逻辑移位</span></th><th><span>算数移位</span></th></tr></thead><tbody><tr><td><strong><span>sll rd, rs1, rs2</span></strong><span>    逻辑左移（空位补0）</span></td><td><strong><span>sra rd, rs1, rs2</span></strong><span>    算术右移（空位用最高位填充）</span></td></tr><tr><td><strong><span>slli rd, rs1, shamt</span></strong><span>    立即数逻辑左移</span></td><td><strong><span>srai rd, rs1, shamt</span></strong><span>    立即数逻辑右移</span></td></tr><tr><td><strong><span>srl rd, rs1, rs2 </span></strong><span>   逻辑右移（空位补0）</span></td><td>&nbsp;</td></tr><tr><td><strong><span>srli rd, rs1, shamt</span></strong><span>    立即数逻辑右移</span></td><td>&nbsp;</td></tr></tbody></table></figure><p><code>----lb 字节载入  lbu无符号字节载入----</code></p><h5><a name="spike统计精确指令数目" class="md-header-anchor"></a><span>Spike统计精确指令数目：</span></h5><ol start='' ><li><span>使用 </span><code>spike</code><span> 前需要修改 </span><code>coremark/linux64/syscalls.c</code><span> 中的 </span><code>vprintf</code><span> 函数为原注释内容</span></li><li><span>在 </span><code>coremark</code><span> 目录下执行编译 </span><code>make compile</code><span> 产生 </span><code>coremark.riscv</code><span> 文件   </span></li><li><span>运行仿真器</span><code>spike -l coremark.riscv</code></li></ol><table>
<tbody><tr>
   <td><center><img src="./spike_inst371146.png" width="400" height="100"><center>unsigned_int32  inst nums=371146</center></center></td>
   <td><center><img src="./spike_inst332765.png" width="400" height="100"><center>signed_int32  inst nums=332765</center></center></td>
</tr>
</tbody></table><ul><li><span>指令数目：</span><code>371146 &gt; 332765</code><span>  减少大于 </span><code>1/10</code></li></ul><h4><a name="初步结论" class="md-header-anchor"></a><strong><span>初步结论</span></strong></h4><h5><a name="unsigned-溢出" class="md-header-anchor"></a><strong><span>unsigned 溢出</span></strong></h5><ul><li><span>在RV64中，register的寬度是64-bit．</span></li></ul><p><span>	</span><span>當你宣告loop index是uint32_t時，這變數你認為是32-bit，但在RV64的CPU中還是放在64-bit．所以當32-bit遞增到滿(2^32)-1時，如果不做任何處理，值會累加到2^32，也就是進位到第32 bit，而超出32-bit的範圍</span></p><p><span>	</span><span>但你已經宣告這是uint32_t，所以compiler覺得它有必要幫你確保值不能超出32-bit範圍．也就是如果超出32-bit範圍要wrapping回0．</span></p><p><span>	</span><span>所以它就額外幫你插入指令，每次你對這變數加值時，他就幫你左移右移，確保不會超過32-bit範圍．這個額外的指令就造成CPU多做事，效能就不好．</span></p><p><span>	</span><span>對了，如果你宣告int32_t，因為compiler明定這變數overflow是undefined behavior，所以gcc也沒額外插指令．</span></p><p><span>	</span><span>這就是為什麼由uint32_t改成int32_t會可以</span></p><h5><a name="运算符号扩展" class="md-header-anchor"></a><strong><span>运算符号扩展</span></strong></h5><ul><li><span>在64位 RISC-V 机器上，32位的值总是被存储为符号扩展到64位。默认将32位值进行符号扩展到64位。如果需要将32位值进行0扩展到64位，那么必须为此提供扩展代码。没有提供将32位值0扩展到64位的指令，所以这需要两条移位指令。可以使用直接0的addw对一条指令进行符号扩展，因为默认情况下指令符号扩展到64位。结果是有符号类型比无符号类型更有效率。</span></li><li><span>在编译器中如何描述像addw这样的32位数据指令上的一些64位指令存在问题。例如，有一个addsi3模式，它说我们有一个指令，可以添加2个32位的值，产生一个32位的结果。我们当然没有这样的指示。我们实际拥有的是一条指令，它可以将两个32位的值相加，生成一个32位的结果符号——扩展到64位，这并不是完全相同的东西。因为gcc认为我们有一个只产生32位结果的指令，所以任何使用该结果的尝试都需要符号扩展，这是不必要的，因为值已经被符号扩展了。修复这个问题是很复杂的，因为任何重写模式的尝试都会产生副作用，导致不可预测的副作用，可能导致更糟糕的代码。因此，解决这个问题将需要大量的时间和精力，而我从来没有机会解决这个问题。</span></li><li><span>另一个问题是，由于我们有32位和64位模式，有时编译器生成的32位值和64位值实际上是相同的值，但编译器不能对此进行优化，因为它认为它们是不同的值。简单的例子是“void sub (int *a, long long </span><em><span>b) {</span></em><span>a = 1;* b = 1;}&quot;，它被编译成有两个li 1指令，因为一个是32位的值，一个是64位的值，因此从编译器的角度来看，它们是不同的值。</span></li></ul><h4><a name="函数分析" class="md-header-anchor"></a><span>函数分析</span></h4><p><img src="./e31_vs_s51.png" referrerpolicy="no-referrer"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//core_matrix.h</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/*matrix benchmark related stuff */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define MATDAT_INT 1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#if MATDAT_INT</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-variable">ee_s16</span> <span class="cm-variable">MATDAT</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-variable">ee_s32</span> <span class="cm-variable">MATRES</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-variable">ee_f16</span> <span class="cm-variable">MATDAT</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-variable">ee_f32</span> <span class="cm-variable">MATRES</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-keyword">struct</span> <span class="cm-def">MAT_PARAMS_S</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> &nbsp; &nbsp; <span class="cm-variable">N</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">//N--&gt;Dimensions of the matrix. N*N</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">//signed short 16bit A--&gt;input matrix</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">B</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">//signed short 16bit B--&gt;operator matrix (not changed during operations)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>;<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">//signed int 32bit &nbsp; C--&gt;memory for result matrix.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">mat_params</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ee_s16</span> <span class="cm-def">matrix_test</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">B</span>, <span class="cm-variable">MATDAT</span> <span class="cm-variable">val</span>); <span class="cm-comment">//执行下列函数并做CRC校验</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ee_s16</span> <span class="cm-def">matrix_sum</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>, <span class="cm-variable">MATDAT</span> <span class="cm-variable">clipval</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> &nbsp; <span class="cm-def">matrix_mul_const</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>, <span class="cm-variable">MATDAT</span> <span class="cm-variable">val</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> &nbsp; <span class="cm-def">matrix_mul_vect</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">B</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> &nbsp; <span class="cm-def">matrix_mul_matrix</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">B</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> &nbsp; <span class="cm-def">matrix_mul_matrix_bitextract</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">B</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> &nbsp; <span class="cm-def">matrix_add_const</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>, <span class="cm-variable">MATDAT</span> <span class="cm-variable">val</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 612px;"></div><div class="CodeMirror-gutters" style="display: none; height: 612px;"></div></div></div></pre><ul><li><p><span>使用一维数组存取矩阵</span></p><ul><li><span>无需考虑行优先与列优先存储</span></li><li><span>节省空间，存储密度大</span></li></ul></li><li><p><code>N</code><span> 被用来作为迭代的上限，</span><code>i,j,k</code><span> 用于迭代。使用 </span><code>unsigned</code><span> 更合理，如果更改为 </span><code>signed</code><span>，编译器不会因为产生溢出而回滚为 </span><code>0</code><span> (做法：插入逻辑左移右移指令实现)，但是也无法保证结果的正确性，需要软件再做处理。</span><code>CPU</code><span> 的性能因为执行了更少的指令而有所提高，但是却加重了软件的负担。</span></p></li></ul><h5><a name="反汇编代码-matrixmulmatrix-函数分析" class="md-header-anchor"></a><span>反汇编代码 </span><code>matrix_mul_matrix</code><span> 函数分析:</span></h5><table>
<tbody><tr>
   <td><center><img src="./disassemb_func2.png"><center>unsigned_int32 matrix_mul_matrix disassembly insts</center></center></td>
   <td><center><img src="./disassemb_func.png"><center>signed_int32 matrix_mul_matrix disassembly insts</center></center></td>
</tr>
</tbody></table><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">matrix_mul_matrix</span>(<span class="cm-variable">ee_u32</span> <span class="cm-variable">N</span>, <span class="cm-variable">MATRES</span> <span class="cm-operator">*</span><span class="cm-variable">C</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">A</span>, <span class="cm-variable">MATDAT</span> <span class="cm-operator">*</span><span class="cm-variable">B</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ee_u32</span> <span class="cm-variable">i</span>, <span class="cm-variable">j</span>, <span class="cm-variable">k</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">N</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">j</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">j</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">N</span>; <span class="cm-variable">j</span><span class="cm-operator">++</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">C</span>[<span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">N</span> <span class="cm-operator">+</span> <span class="cm-variable">j</span>] <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">k</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">N</span>; <span class="cm-variable">k</span><span class="cm-operator">++</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">C</span>[<span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">N</span> <span class="cm-operator">+</span> <span class="cm-variable">j</span>] <span class="cm-operator">+=</span> (<span class="cm-variable">MATRES</span>)<span class="cm-variable">A</span>[<span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">N</span> <span class="cm-operator">+</span> <span class="cm-variable">k</span>] <span class="cm-operator">*</span> (<span class="cm-variable">MATRES</span>)<span class="cm-variable">B</span>[<span class="cm-variable">k</span> <span class="cm-operator">*</span> <span class="cm-variable">N</span> <span class="cm-operator">+</span> <span class="cm-variable">j</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 249px;"></div><div class="CodeMirror-gutters" style="display: none; height: 249px;"></div></div></div></pre><table>
<tbody><tr>
   <td><center><img src="./mut_slli_srli.png"><center>unsigned_int32 matrix_mul_matrix disassembly insts</center></center></td>
    <td><center><img src="./mut_none_slli_srli.png"><center>signed_int32 matrix_mul_matrix disassembly insts</center></center></td>
</tr>
</tbody></table><p><strong><span>【我的观点】</span></strong></p><ul><li><code>左t2---- C[i * N + j] ----右a3</code><span> 存放累加结果。</span></li><li><span>频繁的逻辑左移与逻辑右移操作是为了得到经过 </span><code>0扩展</code><span> 后的操作数。</span></li><li><span>然后以此操作数为基址，利用指令 </span><code>lh</code><span> 从内存中读取连续的两个字节，经 </span><code>符号位</code><span> 扩展之后写入目的寄存器。</span></li><li><span>实际上，逻辑左移和右移是为了产生数组下标的一个中间环节，而不是溢出，回滚为 0。</span></li><li><span>数组下标默认类型为 </span><code>size_t</code><span>，该值与机器相关。一般是一个 </span><code>unsigned int</code><span> 型，认为它足够大，因此也不会产生溢出</span></li></ul><h4><a name="实验记录在coreipu84axi4下进行" class="md-header-anchor"></a><strong><span>实验记录(在Coreip_U84_axi4下进行)</span></strong></h4><ol start='' ><li><span>根据此文档 </span><a href='http://192.168.110.5:30000/SFC-CPU/WiKi/blob/master/ForNewRecruits/CPU_Designer_Get_Started.md#15-compile-and-run-sitest-for-federation-unlimited'><span>U84环境</span></a><span> </span><code>1.5 Compile and run SiTest for Federation&quot;-unlimited&quot;</code><span> 进行配置</span></li><li><span>在 </span><code>cd sim</code><span> 步骤完成之后，在 </span><code>federation/builds/coreip_u84_axi4/sim/</code><span> 将 </span><code>./sitest +verbose rv64ui-xor --waves=fsdb</code><span> 改步更改为 </span><code>./sitest coremark --waves=fsdb</code><span> 即可运行 </span><code>coremark</code></li><li><span>在 </span><code>federation/software/tests/coremark/</code><span> 目录下更改 </span><code>core_portme.h</code><span> 文件中的 </span><code>#define ee_u32 uint32_t</code><span> 为 </span><code>#define ee_u32 int32_t</code><span> 保存退出</span></li></ol><h5><a name="对比-vcs-执行结果-n136" class="md-header-anchor"></a><span>对比 </span><code>VCS</code><span> 执行结果：</span></h5><table>
<tbody><tr>
   <td><center><img src="./u84_axi4_coremark_vcs2.png" width="800" height="200"><center>unsigned int</center></center></td>
   <td><center><img src="./u84_axi4_coremark_vcs.png" width="800" height="200"><center>signed int</center></center></td>
</tr>
</tbody></table><ul><li><code>VCS</code><span> 仿真器运行时间：</span><code>260.42min = 15625.49s &gt; 12165.81s = 202.76min</code><span>  减少不足 </span><code>1/4</code></li></ul><h5><a name="对比跑分结果-rtl-basebcxfersimcoremarkebcstdoutlog-n141" class="md-header-anchor"></a><span>对比跑分结果 </span><code>RTL-Base/bc_xfer/sim/coremark/ebc_stdout.log</code><span>：</span></h5><table>
<tbody><tr>
   <td><center><img src="./u84_axi4_coremark_score2.png" width="400" height="180"><center>unsigned int dut_stdout</center></center></td>
   <td><center><img src="./u84_axi4_coremark_score.png" width="400" height="180"><center>signed int dut_stdout</center></center></td>
</tr>
</tbody></table><ul><li><span>跑分结果：</span><code>5.48 &lt; 6.31</code><span> 提升了 </span><code>15%</code></li></ul><h5><a name="我的疑问" class="md-header-anchor"></a><span>【我的疑问】</span></h5><p><img src="./coremark_run.png" referrerpolicy="no-referrer" alt="coremark_run"></p><h5><a name="关于-coremark-的工作机制" class="md-header-anchor"></a><strong><span>关于 </span><code>coremark</code><span> 的工作机制</span></strong></h5><p><span>        </span><code>coremark</code><span> 是作为一套标准的测试例程被编译为机器码然后到各个 </span><code>CPU</code><span> 上去执行( </span><code>U84</code><span> </span><code>EBC</code><span> 跑的是同一套测试代码)</span>
<span>​        还是 </span><code>coremark</code><span>只是作为一个监视者，</span><code>U84</code><span> 和 </span><code>EBC</code><span> 上运行着他们各自的测试代码，</span><code>coremark</code><span> 负责评估二者的性能指标，给出跑分</span></p><p><span>        如果是前者，那就有一个很奇怪的问题。</span><code>EBC</code><span> 的 </span><code>coremark</code><span> 运行时间最多不过十几分钟，但是 </span><code>U84</code><span> 的执行时间是要 </span><code>4</code><span> 个多小时。但是分数来讲， </span><code>EBC</code><span> 反而比 </span><code>U84</code><span> 更低</span></p><h5><a name="两个错误" class="md-header-anchor"></a><strong><span>两个错误</span></strong></h5><ol start='' ><li><span>混淆了仿真时间与 </span><code>CPU</code><span> 执行时间：执行慢是指 </span><code>VCS</code><span> 仿真器仿真慢，这是由多方面决定的，包括验证环境，此时服务器资源等等。不能通过 </span><code>VCS</code><span> 最终打印的仿真时间来判断 </span><code>CPU</code><span> 运行慢</span></li><li><code>EBC</code><span> 的 </span><code>iteration</code><span> 被设置为</span><code>1</code><span>，而 </span><code>U84</code><span> 的 </span><code>iteration</code><span> 被设置为 </span><code>10</code><span>，即 </span><code>EBC</code><span> 执行一次 </span><code>coremark</code><span> ，</span><code>U84</code><span> 执行了十次 </span><code>coremark</code><span> ，所以 </span><code>stdout</code><span> 打印出的 </span><code>U84</code><span> </span><code>total ticks</code><span> 高于 </span><code>EBC</code></li></ol><h5><a name="回答总结-from-teacher-syven" class="md-header-anchor"></a><strong><span>回答总结 from teacher Syven</span></strong></h5><ol start='' ><li><p><code>coremark</code><span> 就是一个程序。只不过这个程序有些特殊。</span></p><ul><li><span>它是裸机程序，直接在硬件上跑。不像我们用的 </span><code>APP</code><span>，是跑在操作系统上的。</span></li><li><span>它的目的是衡量 </span><code>CPU</code><span> 的性能。以分数的形式。</span></li><li><span>不同 </span><code>CPU</code><span> 执行同一个基准程序，才能衡量它们之间的性能差别。</span></li></ul></li><li><p><span>性能判定标准：分数 </span><code>score=1000/Total time/Iterations</code><span> 或  </span><code>score=1000/(Total ticks/1000)/ Iterations</code><span> </span></p><ul><li><span>具体来说，就是花费了多少个 </span><code>cycle</code><span> 来执行一次 </span><code>coremark</code><span>。比如 </span><code>EBC</code><span> 花费 </span><code>1000</code><span> 个 </span><code>cycle</code><span> 执行一次</span><code>coremark</code><span>， </span><code>U84</code><span> 花费 </span><code>500</code><span> 个 </span><code>cycle</code><span> 执行一次 </span><code>coremark</code><span> 。那么 </span><code>U84</code><span> 性能就比 </span><code>EBC</code><span> 高一倍</span></li><li><code>coremark</code><span> 主函数里面，开始有个 </span><code>start_time</code><span> ,结束有个 </span><code>stop_time</code><span>,这个就是用来计时的。计时需要用户去定义，有的可能是绝对时间，有的可能是 </span><code>cycle</code><span> 数量（加上频率可换算成时间）</span></li><li><code>spike</code><span> 跑 </span><code>U84</code><span> 那个跑不通(测试实际指令数量)，原因是因为 </span><code>U84</code><span> 里面 </span><code>coremark</code><span> 中加入了 </span><code>sifive</code><span> 平台的一些 </span><code>device</code><span>，这些在 </span><code>spike</code><span> 中是没有的。所以会报错。</span></li><li><code>Iteration</code><span> 会被用到 </span><code>main</code><span> 函数 </span><code>for</code><span> 的参数，所以最好将两 </span><code>CPU</code><span> 的 </span><code>Iteration</code><span> 保持一致，才能更直观的看到 </span><code>CPU ticks</code></li></ul></li></ol><h4><a name="为什么u84-15ebc-2" class="md-header-anchor"></a><span>为什么U84 15%，EBC 2%？</span></h4><p><code>U84</code><span> 查看位置 </span><code>federation/builds/coreip_u84_axi4/sim/sim/coremark/program.elf.out</code><span>  </span></p><p><code>EBC</code><span> 查看更改位置 </span><code>RTL-Base/bc_xfer/software/coremark/linux64/core_portme.mak</code></p><table>
<tbody><tr>
   <td><center><img src="./compile_config_u84.png" width="800" height="200"><center>U84 compile config</center></center></td>
</tr>
</tbody></table>
<table>
<tbody><tr>
   <td><center><img src="./compile_config_ebc.png" width="800" height="200"><center>EBC compile config</center></center></td>
</tr>
</tbody></table><hr /><h4><a name="ebc-gcc830" class="md-header-anchor"></a><span>EBC </span><em><span>(GCC8.3.0)</span></em></h4><figure><table><thead><tr><th><span>Data Type</span></th><th><span>Compile Configure</span></th><th><span>Total ticks</span></th><th><span>Score</span></th><th>&nbsp;</th><th><span>Instruction</span></th><th>&nbsp;</th><th><span>Hart(Core)</span></th><th><span>Iteration</span></th></tr></thead><tbody><tr><td><code>int32</code></td><td><code>A</code></td><td><code>261790</code></td><td><code>3.82</code></td><td><code>12.4%↑</code></td><td><code>321848</code></td><td><code>15.9%↓</code></td><td><code>core 0</code></td><td><code>1</code></td></tr><tr><td><code>uint32</code></td><td><code>A</code></td><td><code>294146</code></td><td><code>3.40</code></td><td>&nbsp;</td><td><code>382729</code></td><td>&nbsp;</td><td><code>core 0</code></td><td><code>1</code></td></tr><tr><td><code>int32</code></td><td><code>B</code></td><td><code>268699</code></td><td><code>3.72</code></td><td><code>14.1%↑</code></td><td><code>325889</code></td><td><code>15.9%↓</code></td><td><code>core 0</code></td><td><code>1</code></td></tr><tr><td><code>uint32</code></td><td><code>B</code></td><td><code>306343</code></td><td><code>3.26</code></td><td>&nbsp;</td><td><code>387408</code></td><td>&nbsp;</td><td><code>core 0</code></td><td><code>1</code></td></tr><tr><td><code>int32</code></td><td><code>C</code></td><td><code>291688</code></td><td><code>3.43</code></td><td><code>1.8%↑</code></td><td><code>332765</code></td><td><code>10.3%↓</code></td><td><code>core 0</code></td><td><code>1</code></td></tr><tr><td><code>uint32</code></td><td><code>C</code></td><td><code>296389</code></td><td><code>3.37</code></td><td>&nbsp;</td><td><code>371146</code></td><td>&nbsp;</td><td><code>core 0</code></td><td><code>1</code></td></tr></tbody></table></figure><p><strong><span>A:</span></strong><span> </span><em><span>(old EBC: add U84)</span></em></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2 -funroll-loops -DPREALLOCATE=1 -mcmodel=medany -std=gnu99 -fno-common -fno-builtin-printf -march=rv64ima -mabi=lp64 -nostartfiles -lm -lgcc\</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-finline-functions --param max-inline-insns-auto=20 -falign-functions=4 -falign-jumps=4 -falign-loops=4 -DITERATIONS=1 -DPERFORMANCE_RUN=1 -DFLAGS_STR=\"\" </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 91px;"></div><div class="CodeMirror-gutters" style="display: none; height: 91px;"></div></div></div></pre><p><strong><span>B:</span></strong><span> </span><em><span>(old EBC: O3-&gt;O2)</span></em></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2 -funroll-loops -DPREALLOCATE=1 -mcmodel=medany -std=gnu99 -fno-common -fno-builtin-printf -march=rv64ima -mabi=lp64 -nostartfiles -lm -lgcc</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><strong><span>C:</span></strong><span> </span><em><span>(old EBC)</span></em></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O3 -funroll-loops -DPREALLOCATE=1 -mcmodel=medany -std=gnu99 -fno-common -fno-builtin-printf -march=rv64ima -mabi=lp64 -nostartfiles -lm -lgcc</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><h4><a name="u84-gcc830" class="md-header-anchor"></a><span>U84 </span><em><span>(GCC8.3.0)</span></em></h4><figure><table><thead><tr><th><span>Data Type</span></th><th><span>Compile Configure</span></th><th><span>Total ticks</span></th><th><span>Score</span></th><th>&nbsp;</th><th><span>Instruction</span></th><th>&nbsp;</th><th><span>Hart(Core)</span></th><th><span>Iteration</span></th></tr></thead><tbody><tr><td><code>int32</code></td><td><code>D</code></td><td><code>191411</code></td><td><code>5.22</code></td><td><code>13.3%↑</code></td><td><code>320496</code></td><td><code>15.9%↓</code></td><td><code>Hart 0</code></td><td><code>1</code></td></tr><tr><td><code>uint32</code></td><td><code>D</code></td><td><code>217079</code></td><td><code>4.61</code></td><td>&nbsp;</td><td><code>381132</code></td><td>&nbsp;</td><td><code>Hart 0</code></td><td><code>1</code></td></tr><tr><td><code>int32</code></td><td><code>E</code></td><td><code>191823</code></td><td><code>5.21</code></td><td><code>13.1%↑</code></td><td><code>223101</code></td><td><code>10.1%↓</code></td><td><code>Hart 0</code></td><td><code>1</code></td></tr><tr><td><code>uint32</code></td><td><code>E</code></td><td><code>217154</code></td><td><code>4.61</code></td><td>&nbsp;</td><td><code>248167</code></td><td>&nbsp;</td><td><code>Hart 0</code></td><td><code>1</code></td></tr><tr><td><code>int32</code></td><td><code>F</code></td><td><code>175873</code></td><td><code>5.69</code></td><td><code>13.3%↑</code></td><td>&nbsp;</td><td><code>%↓</code></td><td><code>Hart 0</code></td><td><code>1</code></td></tr><tr><td><code>uint32</code></td><td><code>F</code></td><td><code>199059</code></td><td><code>5.02</code></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><code>Hart 0</code></td><td><code>1</code></td></tr><tr><td><code>int32</code></td><td><code>G-&gt;O3</code></td><td><code>199370</code></td><td><code>5.02</code></td><td><code>7.04%↑</code></td><td>&nbsp;</td><td><code>%↓</code></td><td><code>Hart 0</code></td><td><code>1</code></td></tr><tr><td><code>uint32</code></td><td><code>G-&gt;O3</code></td><td><code>213103</code></td><td><code>4.69</code></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><code>Hart 0</code></td><td><code>1</code></td></tr></tbody></table></figure><p><strong><span>D:</span></strong><span> </span><em><span>(U84: add -march=rv64g)</span></em></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2 -march=rv64g -fno-common -funroll-loops -finline-functions -fno-builtin-printf --param max-inline-insns-auto=20 -falign-functions=4 -falign-jumps=4 -falign-loops=4 -DITERATIONS=1 -DPERFORMANCE_RUN=1 -DFLAGS_STR=\"\"</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 68px;"></div><div class="CodeMirror-gutters" style="display: none; height: 68px;"></div></div></div></pre><p><strong><span>E:</span></strong><span> </span><em><span>(U84: add -march=rv64ima -mabi=lp64)</span></em><span>  </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2 -march=rv64ima -mabi=lp64 -fno-common -funroll-loops -finline-functions -fno-builtin-printf --param max-inline-insns-auto=20 -falign-functions=4 -falign-jumps=4 -falign-loops=4 -DITERATIONS=1 -DPERFORMANCE_RUN=1 -DFLAGS_STR=\"\"</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 68px;"></div><div class="CodeMirror-gutters" style="display: none; height: 68px;"></div></div></div></pre><p><strong><span>F:</span></strong><span> </span><em><span>(old U84)</span></em></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2 -fno-common -funroll-loops -finline-functions -fno-builtin-printf --param max-inline-insns-auto=20 -falign-functions=4 -falign-jumps=4 -falign-loops=4 -DITERATIONS=1 -DPERFORMANCE_RUN=1 -DFLAGS_STR=\"\"</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 68px;"></div><div class="CodeMirror-gutters" style="display: none; height: 68px;"></div></div></div></pre><h4><a name="ebc-vs-u84-gcc830" class="md-header-anchor"></a><span>EBC VS U84 </span><em><span>(GCC8.3.0)</span></em></h4><figure><table><thead><tr><th><span>Core</span></th><th><span>Data Type</span></th><th><span>Compile Configure</span></th><th><span>Total ticks</span></th><th><span>Score</span></th><th>&nbsp;</th><th><span>Instruction</span></th><th>&nbsp;</th><th><span>Iteration</span></th></tr></thead><tbody><tr><td><code>EBC</code></td><td><code>int32</code></td><td><code>G</code></td><td><code>261790</code></td><td><code>3.82</code></td><td><code>12.4%↑</code></td><td><code>312809</code></td><td><code>16.3%↓</code></td><td><code>1</code></td></tr><tr><td><code>EBC</code></td><td><code>uint32</code></td><td><code>G</code></td><td><code>294146</code></td><td><code>3.40</code></td><td>&nbsp;</td><td><code>373715</code></td><td>&nbsp;</td><td><code>1</code></td></tr><tr><td><code>U84</code></td><td><code>int32</code></td><td><code>G</code></td><td><code>191823</code></td><td><code>5.21</code></td><td><code>13.1%↑</code></td><td><code>223101</code></td><td><code>10.1%↓</code></td><td><code>1</code></td></tr><tr><td><code>U84</code></td><td><code>uint32</code></td><td><code>G</code></td><td><code>217154</code></td><td><code>4.61</code></td><td>&nbsp;</td><td><code>248167</code></td><td>&nbsp;</td><td><code>1</code></td></tr><tr><td><code>EBC</code></td><td><code>int32</code></td><td><code>H</code></td><td><code>2581657</code></td><td><code>3.87</code></td><td><code>12.8%↑</code></td><td><code>2838305</code></td><td><code>17.6%↓</code></td><td><code>10</code></td></tr><tr><td><code>EBC</code></td><td><code>uint32</code></td><td><code>H</code></td><td><code>2911299</code></td><td><code>3.43</code></td><td>&nbsp;</td><td><code>3444639</code></td><td>&nbsp;</td><td><code>10</code></td></tr><tr><td><code>U84</code></td><td><code>int32</code></td><td><code>H</code></td><td><code>1737800</code></td><td><code>5.75</code></td><td><code>13.4%↑</code></td><td><code>1769317</code></td><td><code>11.7%↓</code></td><td><code>10</code></td></tr><tr><td><code>U84</code></td><td><code>uint32</code></td><td><code>H</code></td><td><code>1972035</code></td><td><code>5.07</code></td><td>&nbsp;</td><td><code>2003345</code></td><td>&nbsp;</td><td><code>10</code></td></tr></tbody></table></figure><p><strong><span>G:</span></strong><span> </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="makefile"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="makefile"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2 -funroll-loops -DPREALLOCATE=1 -mcmodel=medany -std=gnu11 -fno-common -fno-builtin-printf -march=rv64ima -mabi=lp64 -nostartfiles -lm -lgcc\</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-finline-functions --param max-inline-insns-auto=20 -falign-functions=4 -falign-jumps=4 -falign-loops=4 -DITERATIONS=1 -DPERFORMANCE_RUN=1 -DFLAGS_STR=\<span class="cm-string">"\"</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 91px;"></div><div class="CodeMirror-gutters" style="display: none; height: 91px;"></div></div></div></pre><p><strong><span>H:</span></strong><span> </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="makefile"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="makefile"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2 -funroll-loops -DPREALLOCATE=1 -mcmodel=medany -std=gnu11 -fno-common -fno-builtin-printf -march=rv64ima -mabi=lp64 -nostartfiles -lm -lgcc\</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-finline-functions --param max-inline-insns-auto=20 -falign-functions=4 -falign-jumps=4 -falign-loops=4 -DITERATIONS=10 -DPERFORMANCE_RUN=1 -DFLAGS_STR=\<span class="cm-string">"\"</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 91px;"></div><div class="CodeMirror-gutters" style="display: none; height: 91px;"></div></div></div></pre><h4><a name="实验步骤与错误汇总" class="md-header-anchor"></a><span>实验步骤与错误汇总</span></h4><ul><li><p><span>增加一些编译选项后，在 </span><code>U84</code><span> 上不能启动 </span><code>coremark</code><span> 的解决方法（如下图所示错误）</span></p><p><img src="./u84_err.png" referrerpolicy="no-referrer" alt="image-20200914103001734"></p><p><span>出错原因：含有多个 </span><code>std=gnu99 / std=gnu11</code><span>   </span><code>march=rv64imafdc / march=rv64ima</code><span>   </span><code>mabi=lp64d / mabi=lp64</code><span> 导致冲突</span></p><ul><li><p><span>找到运行 </span><code>coremark</code><span> 正确情况下生成的 </span><code>sim</code><span> 文件夹( </span><code>federatin/builds/coreip_u84_axi4/sim/sim/coremark</code><span> 确保其含有 </span><code>vcs.sim.rerun</code><span> 并且分别需要</span><code>unsigned</code><span> </span><code>signed</code><span> 成功的各一份，以运行两种情况下的仿真)：</span></p><p><img src="./u84_err_deal1.png" referrerpolicy="no-referrer"></p></li><li><p><span>打开 </span><code>program.elf.out</code><span> 修改冗余信息(删除其中非自己配置的 </span><code>march=rv64imafdc</code><span> </span><code>mabi=lp64d</code><span>  </span><code>std=gnu99</code><span> )：</span></p><p><img src="./u84_err_deal2.png" referrerpolicy="no-referrer"></p></li><li><p><span>更改 </span><code>program.elf.out</code><span> 权限为可执行，并运行：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">chmod</span> <span class="cm-operator">+</span>x program.elf.out</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">./program.elf.out</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre></li><li><p><span>此时检查 </span><code>program.elf</code><span> 文件是否得到更新，请确保其随着上述命令重新生成成功。</span></p></li><li><p><span>将 </span><code>program.elf</code><span> 转化生成 </span><code>program.hex</code><span> ：(调用 </span><code>EBC</code><span> 项目中的 </span><code>elf2hex</code><span>)</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EBC/RTL-Base/bc_xfer/software/elf2hex <span class="cm-attribute">--bit-width</span> <span class="cm-number">128</span> <span class="cm-attribute">--input</span> program.elf <span class="cm-attribute">--output</span> program.hex</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre></li><li><p><span>检查 </span><code>program.hex</code><span> 是否得到更新，文件应为 </span><code>128bit</code><span> 宽度</span></p></li><li><p><span>更改 </span><code>vcs.sim.rerun</code><span> 权限为可执行，运行 </span><code>coremark</code><span> ：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">chmod</span> <span class="cm-operator">+</span>x vcs.sim.rerun</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">./vcs.sim.rerun</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre></li></ul></li><li><p><span>运行可能产生的错误</span></p><p><img src="C:\Users\Hyper.Huang\AppData\Roaming\Typora\typora-user-images\image-20200914115428415.png" referrerpolicy="no-referrer" alt="image-20200914115428415"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#以上错误需重新设置环境变量</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-def">VAGCC</span><span class="cm-operator">=</span>/opt/riscv-tools</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-def">DESIGNWARE_HOME</span><span class="cm-operator">=</span>/local_home/tools/vip_amba_svt_0-2018.12</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-def">COREMARKGCC</span><span class="cm-operator">=</span>/opt/riscv-gcc-8.3.0</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 91px;"></div><div class="CodeMirror-gutters" style="display: none; height: 91px;"></div></div></div></pre><p><img src="C:\Users\Hyper.Huang\AppData\Roaming\Typora\typora-user-images\image-20200914134637488.png" referrerpolicy="no-referrer" alt="image-20200914134637488"></p><p><span>该错误，切换回 </span><code>zsh</code><span> 可跑。</span></p></li></ul><h4><a name="编译选项的理解-参考risc-v-gcc工具链httpsmpweixinqqcomsbizmzu2mjm4mtcynqmid2247483839idx1sn8e5a56647321468cd01d01e23efca11echksmfc6b174dcb1c9e5bde40da1a79b8c24cc358f0c449b648ff7538784539d7b3b3432a65cfab55scene21wechatredirect-w3cschoolrisc-vhttpswwww3cschoolcndocgcc7gcc7-risc002dv-optionshtmlrisc-v-toolchain-conventionshttpsgithubcomriscvriscv-toolchain-conventions）" class="md-header-anchor"></a><strong><span>编译选项的理解</span></strong><span> </span><em><span>（</span><a href='https://mp.weixin.qq.com/s?__biz=MzU2MjM4MTcyNQ==&amp;mid=2247483839&amp;idx=1&amp;sn=8e5a56647321468cd01d01e23efca11e&amp;chksm=fc6b174dcb1c9e5bde40da1a79b8c24cc358f0c449b648ff7538784539d7b3b3432a65cfab55&amp;scene=21#wechat_redirect'><span>参考：RISC-V GCC工具链</span></a><span> 、</span><a href='https://www.w3cschool.cn/doc_gcc_7/gcc_7-risc_002dv-options.html'><span>W3CSchoolRISC-V</span></a><span>、</span><a href='https://github.com/riscv/riscv-toolchain-conventions'><span>RISC-V Toolchain Conventions</span></a><span>）</span></em></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-O2:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-funroll-loops:仅对循环次数能够在编译时或运行时确定的循环进行展开，生成的代码尺寸将变大，执行速度可能变快 也可能变慢。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-DPREALLOCATE=1:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-mcmodel=medany:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-std=gnu11:使用C语言的C11标准再加上一些GNU扩展来编译程序。类似的还有-std=c99 -std=gnu9x等</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-fno-common:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-fno-builtin-printf:不接受没有 __builtin_ 前缀的函数作为内建函数。</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-march=rv64ima:为特定的cpu-type编译二进制代码</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-mabi=lp64:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-nostartfiles:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-lm</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-lgcc:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-finline-functions:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">--param max-inline-insns-auto=20 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-falign-functions=4 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-falign-jumps=4 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-falign-loops=4 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-DITERATIONS=10 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-DPERFORMANCE_RUN=1 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">-DFLAGS_STR=\"\"</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 476px;"></div><div class="CodeMirror-gutters" style="display: none; height: 476px;"></div></div></div></pre><h5><a name="-o2--gcc-提供的优化选项" class="md-header-anchor"></a><code>-O2</code><span> : </span><code>GCC</code><span> 提供的优化选项</span></h5><ul><li><code>-O0</code><span>：无优化(默认)</span></li><li><code>-O/-O1</code><span>：使用能减少目标文件大小以及执行时间并且不会使编译时间明显增加的优化。在编译大型程序的时候会显著增加编译时内存的使用。</span></li><li><code>-O2</code><span>：包含 </span><code>-O1</code><span> 的优化并增加了不需要在目标文件大小和执行速度上进行折衷的优化。编译器不执行循环展开以及函数内联。此选项将增加编译时间和目标文件的执行性能。</span></li><li><code>-Os</code><span>：专门优化目标文件大小，执行所有的不增加目标文件大小的 </span><code>-O2</code><span> 优化选项，并且执行专门减小目标文件大小的优化选项。</span></li><li><code>-O3</code><span>：打开所有 </span><code>-O2</code><span> 的优化选项并且增加 </span><code>-finline-functions -funswitch-loops -fpredictive-commoning -fgcse-after-reload -ftree-vectorize</code><span> 优化选项。</span></li></ul><h5><a name="-march--指定目标-risc-v-平台所支持的模块化指令集组合" class="md-header-anchor"></a><code>-march=</code><span> : 指定目标 </span><code>RISC-V</code><span> 平台所支持的模块化指令集组合</span></h5><ul><li><span>由于 </span><code>RISC-V</code><span> 的指令集是模块化的指令集，因此在为目标 </span><code>RISC-V</code><span> 平台进行交叉编译之时，需要通过选项指定目标 </span><code>RISC-V</code><span> 平台所支持的模块化指令集组合，该选项为</span><code>-march=</code><span>，有效的选项值如下：</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">rv32i[m][a][f[d]][c]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">rv32g[c]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">rv64i[m][a][f[d]][c]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">rv64g[c]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 159px;"></div><div class="CodeMirror-gutters" style="display: none; height: 159px;"></div></div></div></pre><ul><li><span>在上述选项中 </span><code>rv32</code><span> 表示目标平台是 </span><code>32</code><span> 位架构，</span><code>rv64</code><span> 表示目标平台是 </span><code>64</code><span> 位架构，其他 </span><code>i/m/a/f/d/c/g</code><span> 分别代表了 </span><code>RISC-V</code><span> 模块化指令子集的字母简称。</span></li></ul><h5><a name="-mabi-为指定的-abi-生成代码" class="md-header-anchor"></a><code>-mabi=</code><span> 为指定的 </span><code>ABI</code><span> 生成代码。</span></h5><ul><li><strong><span>ABI（应用程序二进制接口）：</span></strong><span>每个操作系统都会为运行在该系统下的应用程序提供应用程序二进制接口</span><code>（Application Binary Interface，ABI）</code><span>。</span><code>ABI</code><span> 包含了应用程序在这个系统下运行时必须遵守的编程约定。 </span><code>ABI</code><span> 总是包含一系列的系统调用和使用这些系统调用的方法，以及关于程序可以使用的内存地址和使用机器寄存器的规定。从一个应用程序的角度看，</span><code>ABI</code><span> 既是系统架构的一部分也是硬件体系结构的重点，因此只要违反二者之一的条件约束就会导致程序出现严重错误。在很多情况下，链接器为了遵守 </span><code>ABI</code><span> 的约定需要做一些重要的工作。例如，</span><code>ABI</code><span> 要求每个应用程序包含一个程序中各例程使用的静态数据的所有地址表，链接器通过收集所有链接到程序中的模块的地址信息来创建地址表。</span><code>ABI</code><span> 经常影响链接器的是对标准过程调用的定义。</span></li><li><span>由于 </span><code>RISC-V</code><span> 的指令集是模块化的指令集，因此在为目标 </span><code>RISC-V</code><span> 平台进行交叉编译之时，需要通过选项指定嵌入式 </span><code>RISC-V</code><span> 目标平台所支持的 </span><a href='https://baike.baidu.com/item/ABI/10912305'><span>ABI</span></a><span> 函数调用规则。</span><code>RISC-V</code><span> 定义了两种整数的 </span><code>ABI</code><span> 调用规则和三种浮点 </span><code>ABI</code><span> 调用规则，通过选项（-abi=）指明，有效的选项值如下：</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  - ilp32</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  - ilp32f</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  - ilp32d</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  - lp64</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  - lp64f</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  - lp64d</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 136px;"></div><div class="CodeMirror-gutters" style="display: none; height: 136px;"></div></div></div></pre><ul><li><p><span>在上述选项中两种前缀 </span><code>ilp32和lp64</code><span> 表示的含义如下：</span></p><ul><li><span>前缀 </span><code>ilp32</code><span> 表示目标平台是 </span><code>32</code><span> 位架构，在此架构下，</span><code>C</code><span> 语言的 </span><code>“int”</code><span> 和 </span><code>“long”</code><span> 变量长度为 </span><code>32bit</code><span> ，</span><code>“long long”</code><span> 变量为 </span><code>64bit</code><span> ；</span></li><li><span>前缀 </span><code>lp64</code><span> 表示目标平台是 </span><code>64</code><span> 位架构，</span><code>C</code><span> 语言的 </span><code>“int”</code><span> 变量长度为 </span><code>32bit</code><span>，而 </span><code>“long”</code><span> 变量长度为</span><code>64bit</code><span> 。</span></li><li><code>RISC-V</code><span> 的 </span><code>32位</code><span> 和 </span><code>64位</code><span> 架构下更多的数据类型宽度如图所示：</span></li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Dpj9ExSMmvS3hiaiaQ0oZcOlsNeOymMKQO4k4bGjEDO9QvolyAAw1zqbWxL6FsTTibws9Y8VYfBX9KVwEFO5XVIVw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" referrerpolicy="no-referrer" alt="RISC-V的32位和64位架构下的数据类型宽度"></p><ul><li><p><span>上述选项中的三种后缀类型 </span><code>无后缀、后缀f、后缀d</code><span> 表示的含义如下：</span></p><ul><li><code>无后缀</code><span> : 在此架构下，如果使用了浮点类型的操作，直接使用 </span><code>RISC-V</code><span> 浮点指令进行支持。但是当浮点数作为函数参数进行传递之时，无论单精度浮点数还是双精度浮点数均需要通过存储器中的堆栈进行传递。</span></li></ul><ul><li><code>f</code><span> : 表示目标平台支持硬件单精度浮点指令。在此架构下，如果使用了浮点类型的操作，直接使用</span><code>RISC-V</code><span> 浮点指令进行支持。但是当浮点数作为函数参数进行传递之时，单精度浮点数可以直接通过寄存器传递，而双精度浮点数需要通过存储器中的堆栈进行传递。</span></li><li><code>d</code><span> : 表示目标平台支持硬件双精度浮点指令。在此架构下，如果使用了浮点类型的操作，直接使用</span><code>RISC-V</code><span> 浮点指令进行支持。当浮点数作为函数参数进行传递之时，无论单精度还是双精度浮点数都可以直接通过寄存器传递。</span></li></ul></li></ul></li><li><p><span>目前 </span><code>RISC-V GCC</code><span> 工具链认为，在实际的情形中，一个程序的大小一般不会超过 </span><code>4GB</code><span> 的大小，因此在程序内部的寻址空间不能超过 </span><code>4GB</code><span> 的空间。而在 </span><code>64</code><span> 位的架构中，地址空间的大小远远的大于 </span><code>4GB</code><span> 的空间，因此针对 </span><code>RV64</code><span> 架构而言，</span><code>RISC-V GCC</code><span> 工具链定义了 </span><code>（–mcmodel=）</code><span> 选项用于指定寻址范围的模式，使得编译器在编译阶段能够按照相应的策略编译生成代码。其有效的选项值如下：</span></p><ul><li><code>-mcmodel=medlow</code><span> : 用于指示该程序的寻址范围固定只能在 </span><code>-2GB ~ +2GB</code><span> 的空间内。注意：地址区间没有负数可言，</span><code>-2GB</code><span> 是指整个 </span><code>64</code><span> 位地址空间最高 </span><code>2GB</code><span> 地址区间。由于此模式的寻址空间是固定的 </span><code>-2GB ~ +2GB</code><span> 的空间内，因此编译器能够相对生成比较高效的代码，但是由于寻址空间固定，对于整个 </span><code>64</code><span> 位的大多数地址空间都无法访问到，用户需小心使用。</span></li></ul><ul><li><code>-mcmodel=medany</code><span> : 用于指示该程序的寻址范围可以在任意的一个 </span><code>4G</code><span> 空间内。由于此模式的寻址空间不是固定的，所以相对比较灵活。</span></li></ul></li></ul><ul><li><span>在 </span><code>RV32</code><span> 架构中，整个地址空间的大小就是 </span><code>4GB</code><span> ，因此 </span><code>（–mcmodel=）</code><span> 选项的任何值对于编译的结果都无影响。</span><code>RISC-V GCC</code><span> 工具链在未来可能也会支持大于 </span><code>4GB</code><span> 的寻址空间。</span></li></ul><h5><a name="--march）和--mabi）选项合法组合" class="md-header-anchor"></a><span>（–march=）和（–mabi=）选项合法组合</span></h5><ul><li><span>虽然</span><code>（–march=）和（–mabi=）</code><span> 选项理论上可以组成很多种不同的组合，但是目前并不是所有的 </span><code>（–march=）和（–mabi=）</code><span> 选项组合都是合法，目前的 </span><code>riscv-none-embed</code><span> 工具所支持的组合如下：</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32i/mabi=ilp32</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32ic/mabi=ilp32</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32im/mabi=ilp32</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32imc/mabi=ilp32</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32iac/mabi=ilp32</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32imac/mabi=ilp32</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32imaf/mabi=ilp32f</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32imafc/mabi=ilp32f</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32imafdc/mabi=ilp32f</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv32gc/mabi=ilp32f</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv64imac/mabi=lp64</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv64imafdc/mabi=lp64d</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- march=rv64gc/mabi=lp64d</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 295px;"></div><div class="CodeMirror-gutters" style="display: none; height: 295px;"></div></div></div></pre><p>&nbsp;</p><hr /><hr /><hr /><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;stdio.h&gt; &nbsp;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define MAX_UNSIGNED 4294967295</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">main</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">argc</span>, <span class="cm-variable-3">char</span> <span class="cm-variable-3">*</span><span class="cm-variable">argv</span>[]) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{ &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">arr</span>[<span class="cm-number">10</span>]<span class="cm-operator">=</span>{<span class="cm-number">0</span>};</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">unsigned</span> <span class="cm-variable-3">int</span> <span class="cm-variable">max_uint</span> <span class="cm-operator">=</span> <span class="cm-number">0</span><span class="cm-operator">-</span><span class="cm-number">1</span>; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">arr</span>[<span class="cm-variable">max_uint</span><span class="cm-operator">+</span><span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-number">2</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"max_uint=%u; max_uint+1=%u;\n"</span>, <span class="cm-variable">max_uint</span>, <span class="cm-variable">max_uint</span><span class="cm-operator">+</span><span class="cm-number">1</span>); &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"arr[max_uint+1]=%u;\n"</span>, <span class="cm-variable">arr</span>[<span class="cm-variable">max_uint</span><span class="cm-operator">+</span><span class="cm-number">1</span>]); &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 249px;"></div><div class="CodeMirror-gutters" style="display: none; height: 249px;"></div></div></div></pre><p><img src="./000.png" referrerpolicy="no-referrer"></p><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="c"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;stdio.h&gt; &nbsp;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define MAX_SIGNED 2147483647</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">main</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">argc</span>, <span class="cm-variable-3">char</span> <span class="cm-variable-3">*</span><span class="cm-variable">argv</span>[]) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{ &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">arr</span>[<span class="cm-number">10</span>]<span class="cm-operator">=</span>{<span class="cm-number">0</span>};</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">max_int</span> <span class="cm-operator">=</span> (<span class="cm-number">1</span><span class="cm-operator">&lt;&lt;</span><span class="cm-number">31</span>)<span class="cm-operator">-</span><span class="cm-number">1</span>; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">arr</span>[<span class="cm-variable">max_int</span><span class="cm-operator">+</span><span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-number">2</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"max_int=%d; max_int+1=%d;\n"</span>, <span class="cm-variable">max_int</span>, <span class="cm-variable">max_int</span><span class="cm-operator">+</span><span class="cm-number">1</span>); &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"arr[max_int+1]=%d;\n"</span>, <span class="cm-variable">arr</span>[<span class="cm-variable">max_int</span><span class="cm-operator">+</span><span class="cm-number">1</span>]); &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 249px;"></div><div class="CodeMirror-gutters" style="display: none; height: 249px;"></div></div></div></pre><p><img src="./001.png" referrerpolicy="no-referrer"></p></div>
</body>
</html>